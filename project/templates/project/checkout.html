<!-- 
File: create_account_form.html
Author: Song Yu Chen (songyu@bu.edu) 12/07/2025
Description: HTML that extends the base HTML for the checkout page of the project app.
-->
{% extends "project/base.html" %}
{% block content %}

<h2>Checkout Accepted Items</h2>

<form method="post" action="{% url 'stripe_create_session' %}">
    {% csrf_token %}

    {% for bid in accepted_bids %}
        <div class="card product-card">

            <label>
                <input type="checkbox" name="selected_bids" value="{{ bid.pk }}">
                
                {% if bid.product.images.first %}
                    <img src="{{ bid.product.images.first.image.url }}" class="product-thumb">
                {% elif bid.product.image %}
                    <img src="{{ bid.product.image.url }}" class="product-thumb">
                {% endif %}

                <strong>{{ bid.product.name }}</strong>
            </label>

            <p>Seller Price: ${{ bid.product.expected_price }}</p>
            <p>Your Accepted Bid: <strong>${{ bid.bid_price }}</strong></p>

        </div>
    {% empty %}
        <p>No accepted items available for checkout.</p>
    {% endfor %}

    <hr>

    <button type="submit" class="checkout-btn">
        Checkout Selected Items
    </button>

</form>

{% endblock %}
